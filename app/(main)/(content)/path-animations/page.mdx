import { Drawing, Checkmarks } from './_components/drawing'

The SVG path element lets you draw any kind of shape you want:

```html
<svg width="100%" height="100%">
  <path d="M 0 0 L 100 100" />
</svg>
```

But after drawing the shape, how do you make it come alive? How do you animate it, and how might you use it for other effects? Let's find out!

<Callout>

**Heads up!** This post will not cover how to draw the shape in the first place. If you're not familiar with path commands and the `d` attribute, check out my post on [SVG paths](/svg-paths).

</Callout>

---

## Path Drawing

Perhaps the most common of path animations is the path drawing animation:

<Drawing />

This animation works through two SVG properties working together: `stroke-dasharray` and `stroke-dashoffset`. But what do these properties do? Let's take a look!

---

<ScrollGroup>

<ScrollGroupSection>

### How Paths Get Drawn

To draw a path, the browser first draws a sort-of "skeleton" of the shape using the commands set in the path's `d` attribute:

</ScrollGroupSection>

<ScrollGroupSection>

Then, the browser fills in the area covered by the shape, using the color set by the `fill` property (or black if no fill is set).

</ScrollGroupSection>

<ScrollGroupSection>

Finally, if the path has its `stroke` property set, a line will be drawn centered along the shape's skeleton, using whatever color `stroke` is set to (moving forwards, I'll refer to this line as the path's "stroke").

</ScrollGroupSection>

</ScrollGroup>

---

<ScrollGroup>

<ScrollGroupSection>

The `stroke-dasharray` property lets you draw the stroke as a series of dashes instead of one continuous line:

```html
<path
  stroke="blue"
  stroke-dasharray="10"
/>
```

The number `10` here represents the length of the dash itself _and_ the gap between each dash. In other words, we're telling the browser to draw the stroke with dashes of length 10, separated 10 units apart.

</ScrollGroupSection>

<ScrollGroupSection>

Now if you make the `stroke-dasharray` property big enough, you get a path that's indistinguishable from the original shape.

```
slider
```

</ScrollGroupSection>

<ScrollGroupSection>

This isn't super interesting on its own, until you remember that a large-enough dash also means a large-enough _gap_ that we can use to hide the shape altogether—if only we can move the stroke.

Thankfully, we can! Using—that's right—the `stroke-dashoffset` property:

```html
<path
  stroke="blue"
  stroke-dasharray="20"
  stroke-dashoffset="20"
/>
```

</ScrollGroupSection>

<ScrollGroupSection>

The dash never really want away here—it's just outside of the bounds of the shape. If we now animate the `stroke-dashoffset` property down to zero, we get our drawing animation!

</ScrollGroupSection>

</ScrollGroup>

---

### the path length shortcut

the catch with this is that the right value for `stroke-dasharray` and `stroke-dashoffset` changes depending on the shape.

---

we can avoid the need to measure each shape's length by using the setting the `pathLength` property on the element. unlike what you might expect, this attribute doesn't change how the path is drawn at all (e.g. pathLength `0.5` won't make the browser draw half the shape). instead, it *sets* the length of the shape to a certain value so that `stroke-dasharray` and `stroke-dashoffset` can be relative to this value.

for example, if we set `pathLength` to 1, then setting `stroke-dasharray` to 1 will create dashes and gaps equal to the entire span of the path.

---

with this, we don't need to guess what the correct value is. if we set a value to `pathLength` and ensure both `stroke-dasharray` and `stroke-dashoffset` are set to the same value, we will always get the right number.

one thing that's common in svg paths is to use rounded ends set with the `stroke-linecap` property. these rounded ends are *not* considered as part of the path, so if we set pathLength to 1 and `stroke-dasharray` to 1, we'll find that the dash is just a tad short.

---

to make it work in this case, we need to extend the `stroke-dasharray` just a little longer (say, 1.1).

---

### Stroke-based vs. fill-based

There's just one requirement for this stroke trick to work: the SVG must be **stroke-based**, not fill-based. Take a look at these two identical checkmarks:

<Checkmarks />

We're using the `stroke-dashoffset` and `stroke-dasharray` trick on both SVGs here, but the only SVG animating is the one on the left. How come?

---

If we make each path's skeleton visible, we can see what's going on here:

<Checkmarks />

The SVG on the left is drawn using a stroke, while the SVG on the right is drawn using a fill.

---

## animating along paths

when we animate movement using `translate`, we're forced to animate on a straight line. this approach isn't always the most natural.

---

<ScrollGroup>

<ScrollGroupSection>

we can make our objects animate along a curve by using the `offset-path` css property. `offset-path` lets you place objects on a path of your choosing, defined with the same commands that make up the svg `d` attribute*.

\*for more on the d attribute, check out my post on svg paths


we can place our object on different parts of the path using the `offset-distance` css property.


animating this value lets us create movement. for example, animating from `0%` to `100%` will make the object move along the entirety of the path.


the object will automatically rotate to be perpendicular to the path wherever it is on the path. this is usually what we want, but we can change this behaviour using `offset-rotate`.

</ScrollGroupSection>

<ScrollGroupSection>

### creating lighting effects

one popular animation is a ball of light travel through a path:


a common way of implementing this is using a linear gradient that rotates around the approximate shape of the path, and then making the path mask over the gradient:


this works but leads to inconsistent velocities where the light will be much faster at certain points of the path:


to fix this, we need to make the linear gradient move along the path, using the `offset-distance` property we were just using.

first, we'll make the ball using a combination of a circle and a radial gradient:

```css
.ball {
  background: radial-gradient(circle, red, blue);
}
```

then, we'll put the ball on the path, using the path as a mask to cut out everything outside of the path.


then we animate `offset-distance` to make it move:


we're animating `offset-distance` to a little more than 100 here to make the gradient hide completely when it reaches the end of the path.

</ScrollGroupSection>

</ScrollGroup>

---

## svg masks

you can cut out parts of an svg by using another svg as a mask. as we saw just now with the lighting effect, this can be a powerful trick for making animations.

---

the main drawback to the path drawing animation trick is that it relies on `stroke-dasharray` to work. this means the svg must be drawn with a stroke and not a fill.

this can feel pretty limiting, since strokes are fundamentally symmetric. if we want to animate a tick that tapers off a bit at the end, we can't do it using `stroke-dasharray` alone.

---


